<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Descontos - The GameHub</title>
    
    <!-- CSS do Projeto -->
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="calculadora.css">
    <link rel="stylesheet" href="dark-mode.css">
    <link rel="stylesheet" href="chatbot.css">

    <div class="chat-widget">
    <div class="chat-button" id="chatButton">
        <svg class="chat-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
        </svg>
        <svg class="close-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
        <span class="chat-badge" id="chatBadge">1</span>
    </div>

    <!-- Janela do Chat -->
    <div class="chat-window" id="chatWindow">
        <!-- Header do Chat -->
        <div class="chat-header">
            <div class="chat-avatar">
                <img src="imagens/logo-branco1.png" alt="Assistente">
            </div>
            <div class="chat-info">
                <h4>The GameHub</h4>
                <span class="chat-status online">Online agora</span>
            </div>
            <div class="chat-actions">
                <button class="minimize-btn" id="minimizeChat">‚àí</button>
                <button class="close-chat-btn" id="closeChatBtn">√ó</button>
            </div>
        </div>

        <!-- √Årea de Mensagens -->
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="message-avatar">
                    <img src="imagens/logo-branco1.png" alt="Bot">
                </div>
                <div class="message-content">
                    <p>Ol√°! üëã Sou o assistente virtual da The GameHub. Como posso ajud√°-lo hoje?</p>
                    <span class="message-time">Agora</span>
                </div>
            </div>
        </div>

        <!-- Sugest√µes R√°pidas -->
        <div class="quick-suggestions" id="quickSuggestions">
            <button class="suggestion-btn" data-suggestion="horarios">üìÖ Hor√°rios</button>
            <button class="suggestion-btn" data-suggestion="servicos">üíº Servi√ßos</button>
            <button class="suggestion-btn" data-suggestion="contato">üìû Contato</button>
            <button class="suggestion-btn" data-suggestion="localizacao">üìç Localiza√ß√£o</button>
        </div>

        <!-- √Årea de Input -->
        <div class="chat-input-area">
            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Digite sua mensagem..." maxlength="500">
                <button class="send-btn" id="sendBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
            <div class="chat-footer">
                <span class="typing-indicator" id="typingIndicator" style="display: none;">
                    <span></span><span></span><span></span>
                    Digitando...
                </span>
                <button class="whatsapp-btn" id="whatsappBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.53 3.488"/>
                    </svg>
                    Continuar no WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Notifica√ß√£o de Nova Mensagem -->
    <div class="chat-notification" id="chatNotification" style="display: none;">
        <div class="notification-content">
            <strong>Nova mensagem!</strong>
            <p>O assistente respondeu sua pergunta</p>
        </div>
    </div>
</div>
</head>
<body>
    <header>
        <div class="caixa">
            <h1>
                <img src="imagens/logo-branco1.png" alt="Logo The GameHub">
            </h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="produtos.html">Produtos</a></li>
                    <li><a href="contato.html">Contato</a></li>
                    <li><a href="galeria.html">Galeria</a></li>
                    <li><a href="blog.html">Blog</a></li>
                    <li><a href="mapa.html">Localiza√ß√£o</a></li>
                    <li><a href="agendamento.html">Agendar</a></li>
                    <li><a href="calculadora.html" class="ativo">Calculadora</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <h2 class="titulo-principal-produtos">Calculadora de Descontos</h2>

        <p style="text-align:center; max-width: 800px; margin: 0 auto 30px; color: #ccc;">
            Use esta calculadora para saber quanto voc√™ realmente vai pagar em um produto com desconto
            ‚Äî perfeito para comparar promo√ß√µes de jogos, consoles e perif√©ricos aqui na The GameHub. üéÆ
        </p>

        <!-- Container Principal -->
        <div class="calculadora-container">
            <!-- Painel de Entrada -->
            <div class="calculadora-inputs">
                <div class="calc-section active">
                    <h3>Insira os dados da oferta</h3>
                    <p class="calc-descricao">
                        Informe o pre√ßo original do produto e o percentual de desconto autorizado.
                    </p>

                    <div class="input-group">
                        <label for="preco-original">Pre√ßo original (R$)</label>
                        <input type="number" id="preco-original" placeholder="Ex: 299,90" min="0" step="0.01">
                        <span class="input-hint">Valor sem desconto, como aparece na etiqueta / an√∫ncio.</span>
                    </div>

                    <div class="input-group">
                        <label for="percentual-desconto">Percentual de desconto (%)</label>
                        <input type="number" id="percentual-desconto" placeholder="Ex: 15" min="0" max="100" step="0.1">
                        <span class="input-hint">Informe apenas o n√∫mero. Exemplo: para 15% digite <strong>15</strong>.</span>
                    </div>

                    <div class="input-group">
                        <label for="desconto-extra">Desconto extra (cupom) (%) <span style="font-weight: normal; color: #aaa;">(opcional)</span></label>
                        <input type="number" id="desconto-extra" placeholder="Ex: 5" min="0" max="100" step="0.1">
                        <span class="input-hint">Use se houver cupom adicional aplicado sobre o valor j√° com desconto.</span>
                    </div>

                    <button class="btn-calcular" onclick="calcularDesconto()">Calcular desconto</button>

                    <p id="mensagem-erro" style="margin-top: 10px; color: #ff6b6b; display: none;">
                        Verifique os valores informados. O pre√ßo deve ser maior que 0 e o desconto entre 0% e 100%.
                    </p>
                </div>
            </div>

            <!-- Painel de Resultados -->
            <div class="calculadora-resultados" id="calculadoraResultados">
                <div class="placeholder-resultado" id="placeholderResultado">
                    <svg viewBox="0 0 24 24" fill="currentColor" class="calc-icon">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <h3>Aguardando c√°lculo</h3>
                    <p>Preencha os campos ao lado e clique em <strong>Calcular desconto</strong> para ver o resultado.</p>
                </div>

                <div class="resultado-detalhado" id="resultadoDetalhado" style="display:none;">
                    <h3>Resultado do desconto</h3>

                    <div class="resultado-grid">
                        <div class="resultado-card">
                            <span class="resultado-label">Pre√ßo original</span>
                            <span class="resultado-valor" id="res-preco-original">R$ 0,00</span>
                        </div>

                        <div class="resultado-card">
                            <span class="resultado-label">Desconto aplicado</span>
                            <span class="resultado-valor" id="res-desconto-total">0%</span>
                            <small id="res-detalhe-descontos"></small>
                        </div>

                        <div class="resultado-card">
                            <span class="resultado-label">Valor de desconto</span>
                            <span class="resultado-valor destaque" id="res-valor-desconto">R$ 0,00</span>
                        </div>

                        <div class="resultado-card principal">
                            <span class="resultado-label">Pre√ßo final</span>
                            <span class="resultado-valor destaque" id="res-preco-final">R$ 0,00</span>
                        </div>

                        <div class="resultado-card">
                            <span class="resultado-label">Voc√™ economizou</span>
                            <span class="resultado-valor" id="res-economia">R$ 0,00</span>
                        </div>
                    </div>

                    <p class="resultado-observacao" id="res-observacao"></p>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o de Informa√ß√µes Educativas -->
        <section class="info-educativa">
            <h3>Como o desconto √© calculado?</h3>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-icon">üí∏</div>
                    <h4>F√≥rmula b√°sica</h4>
                    <p>Usamos a seguinte f√≥rmula:</p>
                    <p><strong>Pre√ßo final = Pre√ßo original √ó (1 ‚àí Desconto/100)</strong></p>
                    <p>Exemplo: um jogo de R$ 200,00 com 20% de desconto fica:</p>
                    <p><strong>R$ 200,00 √ó (1 ‚àí 0,20) = R$ 160,00</strong></p>
                </div>

                <div class="info-card">
                    <div class="info-icon">üéÆ</div>
                    <h4>Comparando promo√ß√µes</h4>
                    <ul class="info-list">
                        <li>Use a calculadora para comparar pre√ßos entre lojas.</li>
                        <li>Veja quanto um cupom extra realmente reduz o valor.</li>
                        <li>Descubra se vale a pena esperar uma promo√ß√£o maior.</li>
                    </ul>
                </div>

                <div class="info-card">
                    <div class="info-icon">‚ö†Ô∏è</div>
                    <h4>Fique atento</h4>
                    <ul class="info-list">
                        <li>Algumas lojas aplicam o desconto sobre um pre√ßo ‚Äúde tabela‚Äù mais alto.</li>
                        <li>Sempre confira o valor final antes de fechar a compra.</li>
                        <li>Frete e taxas n√£o est√£o inclu√≠dos nesse c√°lculo.</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <img src="imagens/logo-branco1.png" alt="Logo The GameHub">
        <p class="copyright">&copy; Copyright The GameHub - 2025</p>
        <a href="faq-section.html">Perguntas Frequentes</a>
    </footer>

    <!-- Scripts do site -->
    <script>
        function formatarMoeda(valor) {
            if (isNaN(valor)) return "R$ 0,00";
            return valor.toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });
        }

        function calcularDesconto() {
            const precoOriginalInput = document.getElementById('preco-original');
            const percentualInput = document.getElementById('percentual-desconto');
            const extraInput = document.getElementById('desconto-extra');
            const erro = document.getElementById('mensagem-erro');

            const precoOriginal = parseFloat(precoOriginalInput.value.replace(',', '.'));
            const percentual = parseFloat(percentualInput.value.replace(',', '.'));
            const extra = extraInput.value ? parseFloat(extraInput.value.replace(',', '.')) : 0;

            if (
                isNaN(precoOriginal) || precoOriginal <= 0 ||
                isNaN(percentual) || percentual < 0 || percentual > 100 ||
                extra < 0 || extra > 100
            ) {
                erro.style.display = 'block';
                document.getElementById('resultadoDetalhado').style.display = 'none';
                document.getElementById('placeholderResultado').style.display = 'flex';
                return;
            }

            erro.style.display = 'none';

            // Desconto total combinando desconto principal + extra (aplicado em cascata)
            const valorDescontoPrincipal = precoOriginal * (percentual / 100);
            const precoComDesconto = precoOriginal - valorDescontoPrincipal;

            let valorDescontoExtra = 0;
            if (extra > 0) {
                valorDescontoExtra = precoComDesconto * (extra / 100);
            }

            const valorTotalDesconto = valorDescontoPrincipal + valorDescontoExtra;
            const precoFinal = precoOriginal - valorTotalDesconto;

            const descontoTotalEfetivo = (valorTotalDesconto / precoOriginal) * 100;

            // Atualiza resultados
            document.getElementById('res-preco-original').textContent = formatarMoeda(precoOriginal);
            document.getElementById('res-desconto-total').textContent = descontoTotalEfetivo.toFixed(1).replace('.', ',') + '%';
            document.getElementById('res-valor-desconto').textContent = formatarMoeda(valorTotalDesconto);
            document.getElementById('res-preco-final').textContent = formatarMoeda(precoFinal);
            document.getElementById('res-economia').textContent = formatarMoeda(valorTotalDesconto);

            const detalhe = document.getElementById('res-detalhe-descontos');
            if (extra > 0) {
                detalhe.innerHTML = `(${percentual.toFixed(1).replace('.', ',')}% + cupom de ${extra.toFixed(1).replace('.', ',')}%)`;
            } else {
                detalhe.innerHTML = `(${percentual.toFixed(1).replace('.', ',')}% sobre o pre√ßo original)`;
            }

            const obs = document.getElementById('res-observacao');
            obs.textContent = `Com essa oferta, voc√™ economiza ${formatarMoeda(valorTotalDesconto)} em rela√ß√£o ao pre√ßo original.`;

            document.getElementById('placeholderResultado').style.display = 'none';
            document.getElementById('resultadoDetalhado').style.display = 'block';
        }
    </script>

    <script src="dark-mode.js"></script>
    <script src="chatbot.js"></script>
    <script src="analytics_setup.js"></script>
</body>
</html>
